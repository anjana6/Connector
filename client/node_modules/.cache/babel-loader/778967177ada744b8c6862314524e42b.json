{"ast":null,"code":"'use strict';\n/*!\n * ignore\n */\n\nmodule.exports = applyQueryMiddleware;\n/*!\n * ignore\n */\n\napplyQueryMiddleware.middlewareFunctions = ['count', 'countDocuments', 'deleteMany', 'deleteOne', 'distinct', 'estimatedDocumentCount', 'find', 'findOne', 'findOneAndDelete', 'findOneAndRemove', 'findOneAndReplace', 'findOneAndUpdate', 'remove', 'replaceOne', 'update', 'updateMany', 'updateOne', 'validate'];\n/*!\n * Apply query middleware\n *\n * @param {Query} query constructor\n * @param {Model} model\n */\n\nfunction applyQueryMiddleware(Query, model) {\n  const kareemOptions = {\n    useErrorHandlers: true,\n    numCallbackParams: 1,\n    nullResultByDefault: true\n  };\n  const middleware = model.hooks.filter(hook => {\n    if (hook.name === 'updateOne' || hook.name === 'deleteOne') {\n      return hook.query == null || !!hook.query;\n    }\n\n    if (hook.name === 'remove') {\n      return !!hook.query;\n    }\n\n    if (hook.name === 'validate') {\n      return !!hook.query;\n    }\n\n    return true;\n  }); // `update()` thunk has a different name because `_update` was already taken\n\n  Query.prototype._execUpdate = middleware.createWrapper('update', Query.prototype._execUpdate, null, kareemOptions); // `distinct()` thunk has a different name because `_distinct` was already taken\n\n  Query.prototype.__distinct = middleware.createWrapper('distinct', Query.prototype.__distinct, null, kareemOptions); // `validate()` doesn't have a thunk because it doesn't execute a query.\n\n  Query.prototype.validate = middleware.createWrapper('validate', Query.prototype.validate, null, kareemOptions);\n  applyQueryMiddleware.middlewareFunctions.filter(v => v !== 'update' && v !== 'distinct' && v !== 'validate').forEach(fn => {\n    Query.prototype[`_${fn}`] = middleware.createWrapper(fn, Query.prototype[`_${fn}`], null, kareemOptions);\n  });\n}","map":{"version":3,"sources":["D:/Other/Git/Developer-Connector/node_modules/mongoose/lib/helpers/query/applyQueryMiddleware.js"],"names":["module","exports","applyQueryMiddleware","middlewareFunctions","Query","model","kareemOptions","useErrorHandlers","numCallbackParams","nullResultByDefault","middleware","hooks","filter","hook","name","query","prototype","_execUpdate","createWrapper","__distinct","validate","v","forEach","fn"],"mappings":"AAAA;AAEA;;;;AAIAA,MAAM,CAACC,OAAP,GAAiBC,oBAAjB;AAEA;;;;AAIAA,oBAAoB,CAACC,mBAArB,GAA2C,CACzC,OADyC,EAEzC,gBAFyC,EAGzC,YAHyC,EAIzC,WAJyC,EAKzC,UALyC,EAMzC,wBANyC,EAOzC,MAPyC,EAQzC,SARyC,EASzC,kBATyC,EAUzC,kBAVyC,EAWzC,mBAXyC,EAYzC,kBAZyC,EAazC,QAbyC,EAczC,YAdyC,EAezC,QAfyC,EAgBzC,YAhByC,EAiBzC,WAjByC,EAkBzC,UAlByC,CAA3C;AAqBA;;;;;;;AAOA,SAASD,oBAAT,CAA8BE,KAA9B,EAAqCC,KAArC,EAA4C;AAC1C,QAAMC,aAAa,GAAG;AACpBC,IAAAA,gBAAgB,EAAE,IADE;AAEpBC,IAAAA,iBAAiB,EAAE,CAFC;AAGpBC,IAAAA,mBAAmB,EAAE;AAHD,GAAtB;AAMA,QAAMC,UAAU,GAAGL,KAAK,CAACM,KAAN,CAAYC,MAAZ,CAAmBC,IAAI,IAAI;AAC5C,QAAIA,IAAI,CAACC,IAAL,KAAc,WAAd,IAA6BD,IAAI,CAACC,IAAL,KAAc,WAA/C,EAA4D;AAC1D,aAAOD,IAAI,CAACE,KAAL,IAAc,IAAd,IAAsB,CAAC,CAACF,IAAI,CAACE,KAApC;AACD;;AACD,QAAIF,IAAI,CAACC,IAAL,KAAc,QAAlB,EAA4B;AAC1B,aAAO,CAAC,CAACD,IAAI,CAACE,KAAd;AACD;;AACD,QAAIF,IAAI,CAACC,IAAL,KAAc,UAAlB,EAA8B;AAC5B,aAAO,CAAC,CAACD,IAAI,CAACE,KAAd;AACD;;AACD,WAAO,IAAP;AACD,GAXkB,CAAnB,CAP0C,CAoB1C;;AACAX,EAAAA,KAAK,CAACY,SAAN,CAAgBC,WAAhB,GAA8BP,UAAU,CAACQ,aAAX,CAAyB,QAAzB,EAC5Bd,KAAK,CAACY,SAAN,CAAgBC,WADY,EACC,IADD,EACOX,aADP,CAA9B,CArB0C,CAuB1C;;AACAF,EAAAA,KAAK,CAACY,SAAN,CAAgBG,UAAhB,GAA6BT,UAAU,CAACQ,aAAX,CAAyB,UAAzB,EAC3Bd,KAAK,CAACY,SAAN,CAAgBG,UADW,EACC,IADD,EACOb,aADP,CAA7B,CAxB0C,CA2B1C;;AACAF,EAAAA,KAAK,CAACY,SAAN,CAAgBI,QAAhB,GAA2BV,UAAU,CAACQ,aAAX,CAAyB,UAAzB,EACzBd,KAAK,CAACY,SAAN,CAAgBI,QADS,EACC,IADD,EACOd,aADP,CAA3B;AAGAJ,EAAAA,oBAAoB,CAACC,mBAArB,CACES,MADF,CACSS,CAAC,IAAIA,CAAC,KAAK,QAAN,IAAkBA,CAAC,KAAK,UAAxB,IAAsCA,CAAC,KAAK,UAD1D,EAEEC,OAFF,CAEUC,EAAE,IAAI;AACZnB,IAAAA,KAAK,CAACY,SAAN,CAAiB,IAAGO,EAAG,EAAvB,IAA4Bb,UAAU,CAACQ,aAAX,CAAyBK,EAAzB,EAC1BnB,KAAK,CAACY,SAAN,CAAiB,IAAGO,EAAG,EAAvB,CAD0B,EACC,IADD,EACOjB,aADP,CAA5B;AAED,GALH;AAMD","sourcesContent":["'use strict';\n\n/*!\n * ignore\n */\n\nmodule.exports = applyQueryMiddleware;\n\n/*!\n * ignore\n */\n\napplyQueryMiddleware.middlewareFunctions = [\n  'count',\n  'countDocuments',\n  'deleteMany',\n  'deleteOne',\n  'distinct',\n  'estimatedDocumentCount',\n  'find',\n  'findOne',\n  'findOneAndDelete',\n  'findOneAndRemove',\n  'findOneAndReplace',\n  'findOneAndUpdate',\n  'remove',\n  'replaceOne',\n  'update',\n  'updateMany',\n  'updateOne',\n  'validate'\n];\n\n/*!\n * Apply query middleware\n *\n * @param {Query} query constructor\n * @param {Model} model\n */\n\nfunction applyQueryMiddleware(Query, model) {\n  const kareemOptions = {\n    useErrorHandlers: true,\n    numCallbackParams: 1,\n    nullResultByDefault: true\n  };\n\n  const middleware = model.hooks.filter(hook => {\n    if (hook.name === 'updateOne' || hook.name === 'deleteOne') {\n      return hook.query == null || !!hook.query;\n    }\n    if (hook.name === 'remove') {\n      return !!hook.query;\n    }\n    if (hook.name === 'validate') {\n      return !!hook.query;\n    }\n    return true;\n  });\n\n  // `update()` thunk has a different name because `_update` was already taken\n  Query.prototype._execUpdate = middleware.createWrapper('update',\n    Query.prototype._execUpdate, null, kareemOptions);\n  // `distinct()` thunk has a different name because `_distinct` was already taken\n  Query.prototype.__distinct = middleware.createWrapper('distinct',\n    Query.prototype.__distinct, null, kareemOptions);\n\n  // `validate()` doesn't have a thunk because it doesn't execute a query.\n  Query.prototype.validate = middleware.createWrapper('validate',\n    Query.prototype.validate, null, kareemOptions);\n\n  applyQueryMiddleware.middlewareFunctions.\n    filter(v => v !== 'update' && v !== 'distinct' && v !== 'validate').\n    forEach(fn => {\n      Query.prototype[`_${fn}`] = middleware.createWrapper(fn,\n        Query.prototype[`_${fn}`], null, kareemOptions);\n    });\n}\n"]},"metadata":{},"sourceType":"script"}