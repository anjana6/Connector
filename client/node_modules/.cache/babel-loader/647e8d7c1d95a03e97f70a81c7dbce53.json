{"ast":null,"code":"/*!\n * Module requirements\n */\n'use strict';\n\nconst MongooseError = require('./');\n\nconst util = require('util');\n/**\n * Document Validation Error\n *\n * @api private\n * @param {Document} instance\n * @inherits MongooseError\n */\n\n\nfunction ValidationError(instance) {\n  this.errors = {};\n  this._message = '';\n  MongooseError.call(this, this._message);\n\n  if (instance && instance.constructor.name === 'model') {\n    this._message = instance.constructor.modelName + ' validation failed';\n  } else {\n    this._message = 'Validation failed';\n  }\n\n  this.name = 'ValidationError';\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this);\n  } else {\n    this.stack = new Error().stack;\n  }\n\n  if (instance) {\n    instance.errors = this.errors;\n  }\n}\n/*!\n * Inherits from MongooseError.\n */\n\n\nValidationError.prototype = Object.create(MongooseError.prototype);\nValidationError.prototype.constructor = MongooseError;\n/**\n * Console.log helper\n */\n\nValidationError.prototype.toString = function () {\n  return this.name + ': ' + _generateMessage(this);\n};\n/*!\n * inspect helper\n */\n\n\nValidationError.prototype.inspect = function () {\n  return Object.assign(new Error(this.message), this);\n};\n\nif (util.inspect.custom) {\n  /*!\n  * Avoid Node deprecation warning DEP0079\n  */\n  ValidationError.prototype[util.inspect.custom] = ValidationError.prototype.inspect;\n}\n/*!\n * Helper for JSON.stringify\n */\n\n\nValidationError.prototype.toJSON = function () {\n  return Object.assign({}, this, {\n    message: this.message\n  });\n};\n/*!\n * add message\n */\n\n\nValidationError.prototype.addError = function (path, error) {\n  this.errors[path] = error;\n  this.message = this._message + ': ' + _generateMessage(this);\n};\n/*!\n * ignore\n */\n\n\nfunction _generateMessage(err) {\n  const keys = Object.keys(err.errors || {});\n  const len = keys.length;\n  const msgs = [];\n  let key;\n\n  for (let i = 0; i < len; ++i) {\n    key = keys[i];\n\n    if (err === err.errors[key]) {\n      continue;\n    }\n\n    msgs.push(key + ': ' + err.errors[key].message);\n  }\n\n  return msgs.join(', ');\n}\n/*!\n * Module exports\n */\n\n\nmodule.exports = exports = ValidationError;","map":{"version":3,"sources":["D:/Other/Git/Developer-Connector/node_modules/mongoose/lib/error/validation.js"],"names":["MongooseError","require","util","ValidationError","instance","errors","_message","call","constructor","name","modelName","Error","captureStackTrace","stack","prototype","Object","create","toString","_generateMessage","inspect","assign","message","custom","toJSON","addError","path","error","err","keys","len","length","msgs","key","i","push","join","module","exports"],"mappings":"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","sourcesContent":["/*!\n * Module requirements\n */\n\n'use strict';\n\nconst MongooseError = require('./');\nconst util = require('util');\n\n/**\n * Document Validation Error\n *\n * @api private\n * @param {Document} instance\n * @inherits MongooseError\n */\n\nfunction ValidationError(instance) {\n  this.errors = {};\n  this._message = '';\n\n  MongooseError.call(this, this._message);\n  if (instance && instance.constructor.name === 'model') {\n    this._message = instance.constructor.modelName + ' validation failed';\n  } else {\n    this._message = 'Validation failed';\n  }\n  this.name = 'ValidationError';\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this);\n  } else {\n    this.stack = new Error().stack;\n  }\n\n  if (instance) {\n    instance.errors = this.errors;\n  }\n}\n\n/*!\n * Inherits from MongooseError.\n */\n\nValidationError.prototype = Object.create(MongooseError.prototype);\nValidationError.prototype.constructor = MongooseError;\n\n/**\n * Console.log helper\n */\n\nValidationError.prototype.toString = function() {\n  return this.name + ': ' + _generateMessage(this);\n};\n\n/*!\n * inspect helper\n */\n\nValidationError.prototype.inspect = function() {\n  return Object.assign(new Error(this.message), this);\n};\n\nif (util.inspect.custom) {\n  /*!\n  * Avoid Node deprecation warning DEP0079\n  */\n\n  ValidationError.prototype[util.inspect.custom] = ValidationError.prototype.inspect;\n}\n\n/*!\n * Helper for JSON.stringify\n */\n\nValidationError.prototype.toJSON = function() {\n  return Object.assign({}, this, { message: this.message });\n};\n\n/*!\n * add message\n */\n\nValidationError.prototype.addError = function(path, error) {\n  this.errors[path] = error;\n  this.message = this._message + ': ' + _generateMessage(this);\n};\n\n/*!\n * ignore\n */\n\nfunction _generateMessage(err) {\n  const keys = Object.keys(err.errors || {});\n  const len = keys.length;\n  const msgs = [];\n  let key;\n\n  for (let i = 0; i < len; ++i) {\n    key = keys[i];\n    if (err === err.errors[key]) {\n      continue;\n    }\n    msgs.push(key + ': ' + err.errors[key].message);\n  }\n\n  return msgs.join(', ');\n}\n\n/*!\n * Module exports\n */\n\nmodule.exports = exports = ValidationError;\n"]},"metadata":{},"sourceType":"script"}